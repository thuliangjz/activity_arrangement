# -*- coding:utf-8 -*-  
from datetime import time
import datetime
import re
URL_CUSTOMER = 'personal_management:list_page'
#每次import这个模块的时候应当从文件中读出这两个值
APPLY_TIME_START = time(hour = 0, minute = 0, second = 0)
APPLY_TIME_END = time(hour = 23, minute = 59, second = 59)
ABS_PATH_TIME_FILE = None
apply_time_changed = True
def get_apply_time_start():
	global apply_time_changed, ABS_PATH_TIME_FILE, APPLY_TIME_START, APPLY_TIME_END
	if (not apply_time_changed) or ABS_PATH_TIME_FILE == None: 
		return APPLY_TIME_START
	else:
		f = open(ABS_PATH_TIME_FILE, 'r')
		pat = re.compile(r'<time_start>(.+)</time_start><time_end>(.+)</time_end>')
		t_str = pat.search(f.readline()).groups()
		if t_str == None:
			raise ValueError
		APPLY_TIME_START = datetime.datetime.strptime(t_str[0], '%H:%M').time()
		APPLY_TIME_END = datetime.datetime.strptime(t_str[1], '%H:%M').time()
		apply_time_changed = False
		return APPLY_TIME_START


def get_apply_time_end():
	global apply_time_changed, ABS_PATH_TIME_FILE, APPLY_TIME_START, APPLY_TIME_END
	if (not apply_time_changed) or ABS_PATH_TIME_FILE == None: 
		return APPLY_TIME_END
	else:
		f = open(ABS_PATH_TIME_FILE, 'r')
		pat = re.compile(r'<time_start>(.+)</time_start><time_end>(.+)</time_end>')
		t_str = pat.search(f.readline()).groups()
		if t_str == None:
			raise ValueError
		APPLY_TIME_START = datetime.datetime.strptime(t_str[0], '%H:%M').time()
		APPLY_TIME_END = datetime.datetime.strptime(t_str[1], '%H:%M').time()
		apply_time_changed = False
		return APPLY_TIME_END