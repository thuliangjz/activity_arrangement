from django.db import models

# Create your models here.
from django.db import models
from django.contrib import auth
from django.contrib.auth.models import User
#the name of all models should not exceed 256 characters
class Place(models.Model):
	name = models.CharField(max_length = 256)
	description = models.TextField(blank = True) 
	potential = models.IntegerField()
	time_start = models.DateField(blank = True, null = True)		#only recording days
	time_end = models.DateField(blank = True, null = True)
	def __str__(self):
		return self.name

class Qualification(models.Model):
	certificate = models.CharField(max_length = 256)
	#the qualification will be deleted when user is deleted, maybe use models.SET_NULL
	user = models.OneToOneField(User, on_delete = models.SET_NULL, blank = True, null = True)	
	def __str__(self):
		if self.user != None:
			return 'number:%s, username:%s'%(self.certificate, self.username)
		else:
			return 'number:%s'%(self.certificate)
#use these variables to assign Activity object's state field
UNAPPLIED = 0
APPLYING = 1
APPLIED = 2
class Activity(models.Model):
	name = models.CharField(max_length = 256)
	time_start = models.DateTimeField()
	time_end = models.DateTimeField()
	state = models.IntegerField()		#use one of the const defined above
	num_participants = models.IntegerField()
	privilege = models.IntegerField()	#the total number of privilege a user has used can be computed
	place = models.ForeignKey(Place, models.SET_NULL, blank = True, null = True)
	user = models.ForeignKey(User, on_delete = models.CASCADE)